
<div class="row-fluid">
  <div class="span4">
    <p><b>Cust Name:</b> <%=@event.customer.name%><br>
       <b>Event Name:</b> <a href= "/event_edit/<%=@event.id%>"> <%=@event.name%></a><br>
       <b>Budget:</b> <%=@event.budget%></p>
  </div>    
  <div class="span4">
    <b>Feel_of_day:</b> <%=@event.feel_of_day%><br>
    <b>Colors:</b> <%=@event.color_palette%><br>
    <b>Flower Preferences:</b> <%=@event.flower_types%><br>
    <b>Attire:</b> <%=@event.attire%>
  </div>
  <div class="span4">
    <b>Florist's Event Notes:</b><br>
    <%= raw(@event.notes.gsub("\n", "<br>"))%>
  </div>
</div>

<%=hidden_field_tag "event_id", @event.id%>
<hr />

<h3>Virtual Studio</h3>
  <p>For each arrangement, select the individual items (from the dropdown list) that will be included and add it to the design table.  Determine how many of each item will be included for a particular arrangement. Design only a <u><b>single</u></b> arrangement for each type of arrangement.  Make sure to "save" often. CenterpieceFMT will tally the costs, counts, quantities, etc. for each arrangement later in the quoting process. </p>


<%= form_tag("/virtual_studio_update") do %>


  <div class="row-fluid">
    <div class="span2">
      <button class="btn btn-primary" name= "update" data-disable-with="..." value= "update">Save Updates</button>  
    </div>
    <div class="span3">
      <div class="input-append">
        <%= select_tag "new_item", options_for_select(@dropdown)%> 
        <button class="btn" name= "add" data-disable-with="..." value= "add">Add</button> 
      </div>
    </div>
    
    <script type="text/javascript"> function newPopup(url) {popupWindow = window.open(url,'popUpWindow','height=800,width=100,left=900,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes')}</script>
    <div class="span7">
      <p class="pull-right" ><a class="span12" href="JavaScript:newPopup('/products');">Popup Products<img src="/images/button_all.jpeg" width="30" height="30" class="img-rounded"/></a> </div>
    </div>
      
      <%=hidden_field_tag "event_id", @event.id%>
      
   <%for product_type in @list_of_product_types%>
    <p><b><%=product_type%></b>

  <table class="table table-striped table-hover table-condensed">
               
    
    
    <thead>
      <tr>
        <th class="span1"> </th>
        <th class="span2">Items to Include:</th>
        <%for specification in @specifications%>
          <th class= "span2"><%=specification.item_name%></th>    
        <%end%>
      </tr>
    </thead>
      <tr>       
      <%for each in @list_of_products%>
         <%item = Product.where(name: each).where(florist_id: session["found_florist_id"]).where(product_type: product_type).first%>
       
        <%if item != nil%>
         <td><button  tabindex=-1 class="btn btn-danger btn-mini"  data-disable-with="..." data-confirm="This item will be removed... OK?" name= "remove" value= <%=item.id%>>Remove</button></div> </td> 
        <td><%=each%></td> 
        <% for specification in @specifications%>
          <td><%x = DesignedProduct.where(product_id: item.id).where(specification_id: specification.id).first%>
               <% if x != nil%>
              <%stem_count= x.product_qty / 100.0.round(2) %>
              <%numbs = [0, 0.10, 0.25, 0.50, 0.75, 1.00, 1.25, 1.50, 1.75, 2.00, 3.00, 4.00, 5.00, 6.00, 7.00, 8.00, 9.00, 10.00, 11.00, 12.00, 13.00, 14.00, 15.00, 16.00, 17.00, 18.00, 19.00, 20.00, 21.00, 22.00, 23.00, 24.00, 25.00, 26.00, 27.00, 28.00, 29.00, 30.00, 31.00, 32.00, 33.00, 34.00, 35.00, 36.00, 37.00, 38.00, 39.00, 40.00, 41.00, 42.00, 43.00, 44.00, 45.00, 46.00, 47.00, 48.00, 49.00, 50.00, 75.00, 100.00, 125.00, 150.00, 175.00, 200.00, 250.00, 300.00, 350.00, 400.00, 450.00, 500.00 ]%>
              <%= select_tag "stemcount_#{x.id}", options_for_select(numbs, stem_count), class:  "input-mini"%></td>       
        <%end%> 
        <%end%>
        <%end%> 
      </tr>
      <%end%> 
  </table>
  <%end%>
  <br>
  <%end%>    
 
<script type="text/javascript">function newPopup(url) {popupWindow = window.open(url,'popUpWindow','height=800,width=400,left=900,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes')}</script>

<p><a href="JavaScript:newPopup('/popup_specs/<%=@event.id%>');"><img src="/images/button_all.jpeg" width="30" height="30" class="img-rounded"/>Show Me the Specifications for Each Arrangement</a></p> 
    
 